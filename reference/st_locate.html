<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
This function helps you convert your region names to region codes acceptable
by serotrackr. It is usually used when you get an error for
either adm1 or adm2 arguments in st_validate(). In that case, you
can use this function to convert your region names to codes and make sure
they pass the validation by st_validate().
st_locate() uses its first three (or four) arguments to automatically
match your region names with serotrackr's predefined region codes, which
are stored in serotrackr::regions_df. It performs exact case insensitive
matching and also ignores accented letters. It then produces a report of
your region names that could not be matched. You can then use
st_locate()'s ... (ellipsis) argument to define those unmatched region
names."><title>Convert region names to codes — st_locate • serotrackr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert region names to codes — st_locate"><meta property="og:description" content="
This function helps you convert your region names to region codes acceptable
by serotrackr. It is usually used when you get an error for
either adm1 or adm2 arguments in st_validate(). In that case, you
can use this function to convert your region names to codes and make sure
they pass the validation by st_validate().
st_locate() uses its first three (or four) arguments to automatically
match your region names with serotrackr's predefined region codes, which
are stored in serotrackr::regions_df. It performs exact case insensitive
matching and also ignores accented letters. It then produces a report of
your region names that could not be matched. You can then use
st_locate()'s ... (ellipsis) argument to define those unmatched region
names."><meta property="og:image" content="https://serotracker.github.io/serotrackr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">serotrackr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/serotrackr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/serotracker/serotrackr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Convert region names to codes</h1>
      <small class="dont-index">Source: <a href="https://github.com/serotracker/serotrackr/blob/HEAD/R/st_locate.R" class="external-link"><code>R/st_locate.R</code></a></small>
      <div class="d-none name"><code>st_locate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
This function helps you convert your region names to region codes acceptable
by <code>serotrackr</code>. It is usually used when you get an error for
either <code>adm1</code> or <code>adm2</code> arguments in <code><a href="st_validate.html">st_validate()</a></code>. In that case, you
can use this function to convert your region names to codes and make sure
they pass the validation by <code><a href="st_validate.html">st_validate()</a></code>.</p>
<p><code>st_locate()</code> uses its first three (or four) arguments to automatically
match your region names with <code>serotrackr</code>'s predefined region codes, which
are stored in <code><a href="regions_df.html">serotrackr::regions_df</a></code>. It performs exact case insensitive
matching and also ignores accented letters. It then produces a report of
your region names that could not be matched. You can then use
<code>st_locate()</code>'s ... (ellipsis) argument to define those unmatched region
names.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">st_locate</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">adm0</span>,</span>
<span>  <span class="va">adm1</span>,</span>
<span>  adm2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adm1"</span>, <span class="st">"adm2"</span><span class="op">)</span>,</span>
<span>  n_unmatched_printed <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A dataframe.</p></dd>


<dt>adm0</dt>
<dd><p>A string representing one country (adm0) code. Use
<code>serotrackr::regions$adm0$YourCountry</code> to select it.</p></dd>


<dt>adm1, adm2</dt>
<dd><p>a string or an unquoted name of a character column that
contains the state/province (adm1), or district/municipality
(adm2) names or codes. If your study is conducted in only one adm1 or adm2
region, use <code><a href="regions.html">serotrackr::regions</a></code> to select them.</p></dd>


<dt>...</dt>
<dd><p>A sequence of two-sided assignments as in
<code>"region_name" = region_code</code>. <code>region_name</code> is your unmatched region name.
<code>region_code</code> must be in the form of <code>regions$adm1$YourCountry$YourState</code>
for unmatched adm1 regions and
<code>regions$adm2$YourCountry$YourState$YourDistrict</code> for unmatched adm2
regions. <code>st_locate()</code> uses <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">dplyr::case_when()</a></code> internally for this part.</p></dd>


<dt>into</dt>
<dd><p>A character vector of length 1 or 2, specifying the name(s) of
the new columns that are added to your data for adm1 (and adm2) region
codes. If length is one, name of the adm1 column will be assigned. If
length is two, names of adm1 and adm2 columns will be assigned,
respectively.</p></dd>


<dt>n_unmatched_printed</dt>
<dd><p>A single number, indicating the quantity of
unmatched unique region names that are printed to the console. This argument
is implemented to prevent potentially flooding your console with unmatched
region names. The default value is 20. If there are more than 20 unmatched
region names in your data, increase this number to see the rest.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data.frame that consists of the input data.frame plus one (or two)
new columns containing adm1 (and adm2) region codes. You can then use these
two new columns for adm1 and/or adm2 arguments of <code><a href="st_validate.html">st_validate()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">st_locate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">sample_raw_data</span>,</span></span>
<span class="r-in"><span>  adm0 <span class="op">=</span> <span class="va">regions</span><span class="op">$</span><span class="va">adm0</span><span class="op">$</span><span class="va">Canada</span>,</span></span>
<span class="r-in"><span>  adm1 <span class="op">=</span> <span class="va">state</span>,</span></span>
<span class="r-in"><span>  adm2 <span class="op">=</span> <span class="va">city</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Toronoto"</span> <span class="op">=</span> <span class="va">regions</span><span class="op">$</span><span class="va">adm2</span><span class="op">$</span><span class="va">Canada</span><span class="op">$</span><span class="va">Ontario</span><span class="op">$</span><span class="va">Toronto</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Calagry"</span>  <span class="op">=</span> <span class="va">regions</span><span class="op">$</span><span class="va">adm2</span><span class="op">$</span><span class="va">Canada</span><span class="op">$</span><span class="va">Alberta</span><span class="op">$</span><span class="va">Calgary</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> <span style="color: #FFFFFF; background-color: #00BB00;">adm1</span> <span style="color: #555555;">region names/codes were successfully matched. `adm1` column was added.</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> <span style="color: #FFFFFF; background-color: #00BB00;">adm2</span> <span style="color: #555555;">region names/codes were successfully matched. `adm2` column was added.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    dataset_id    id age_group   age sex   country state   city     start_date </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>          1     1 65+         999 m     Canada  ontario Toronoto 2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>          1     2 0-17          8 f     Canada  ontario London   2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>          1     3 65+          67 m     Canada  Alberta Calagry  2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>          1     4 <span style="color: #BB0000;">NA</span>         -<span style="color: #BB0000;">999</span> f     Canada  ontario toronto  2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>          1     5 0-17          9 m     Canada  ontario Toronoto 2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>          1     6 18-64        43 m     Canada  Alberta Edmonton 2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>          1     7 18-64        18 f     Canada  Alberta Edmonton 2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>          1     8 65+          83 f     Canada  Alberta Calgary  2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>          1     9 65+          77 f     Canada  Alberta Calgary  2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>          1    10 65+          77 m     Canada  Alberta Calagry  2023/Jan/01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 6 more variables: end_date &lt;chr&gt;, test_id &lt;chr&gt;, result &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   result_cat &lt;chr&gt;, adm1 &lt;chr&gt;, adm2 &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Reza Hosseini, SeroTracker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

